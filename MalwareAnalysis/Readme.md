# ğŸ¦  Malware Analysis â€“ Analiza zÅ‚oÅ›liwego oprogramowania

Kompleksowa analiza dwÃ³ch prÃ³bek zÅ‚oÅ›liwego oprogramowania: cheat do gry **Dark and Darker** (ProAim D&D.exe) oraz klasycznego **Trojan-a**. Projekt obejmuje zarÃ³wno **statycznÄ…**, **dynamicznÄ…**, jak i **sieciowÄ… analizÄ™ malware** z wykorzystaniem zaawansowanych narzÄ™dzi oraz sandboxingu. PowstaÅ‚ w ramach kursu **InÅ¼ynieria Wsteczna i Analiza Malware** na AGH.

---

## ğŸ“‚ Struktura projektu

```
Malware_Analysis/
â”œâ”€â”€ Malware_Analysis_Report.pdf  # PeÅ‚ny raport z analizy prÃ³bek
â”œâ”€â”€ Malwere_Tools.pdf            # UÅ¼yte i opisane narzÄ™dzia wykorzystywane w analizie malware
â”œâ”€â”€ samples/                     # Wykorzystane prÃ³bki malware (UWAGA jest to oprogramoanie NIEBEZPIECZNE)
â””â”€â”€ README.md                    # Opis projektu i instrukcja analizy
```

---

## ğŸ› ï¸ Wykorzystane narzÄ™dzia

### ğŸ” Analiza statyczna:
- **PEiD** â€“ wykrywanie packerÃ³w i kryptorÃ³w.
- **PE-bear** â€“ przeglÄ…d struktury PE.
- **PEStudio** â€“ analiza importÃ³w, wskaÅºnikÃ³w kompromitacji.
- **Detect It Easy (DIE)** â€“ identyfikacja kryptorÃ³w i packerÃ³w.
- **IDA Pro** â€“ deasemblacja i inÅ¼ynieria wsteczna.
- **VirusTotal** â€“ analiza reputacji prÃ³bek w wielu silnikach antywirusowych.

### ğŸŒ€ Analiza dynamiczna:
- **RegShot** â€“ monitoring zmian rejestru Windows.
- **Process Monitor (Procmon)** â€“ monitorowanie systemu plikÃ³w, procesÃ³w i rejestru.
- **Process Explorer** â€“ zaawansowany menedÅ¼er procesÃ³w.
- **x64_dbg** â€“ debugger do analizy kodu.
- **VMPDump** â€“ dekryptowanie VMProtect.
- **Hybrid-Analysis.com** â€“ sandbox do dynamicznej analizy zachowania prÃ³bek.

### ğŸŒ Analiza sieciowa:
- **FakeNet-NG** â€“ symulacja Å›rodowiska sieciowego i przechwytywanie ruchu.
- **Wireshark** â€“ analiza pakietÃ³w sieciowych.

---

## ğŸ”¬ Zakres analizy

### PrÃ³bka 1: **ProAim D&D.exe (cheat do gry Dark and Darker)**
- **Obfuskacja:** wykorzystuje VMProtect, silna wielowarstwowa obfuskacja.
- **Rejestr:** tworzy wpisy w harmonogramie zadaÅ„, modyfikuje BAM, prÃ³buje utrzymaÄ‡ aktywnoÅ›Ä‡ w tle.
- **Analiza dynamiczna:** uruchamia puste okno cmd, wyÅ‚Ä…cza siÄ™, modyfikuje rejestr.
- **Sandbox:** podejrzane zachowanie (VMProtect, potencjalny trojan).

### PrÃ³bka 2: **Trojan (Adobe Reader WOW Helper)**
- **Podszywanie siÄ™:** maskuje siÄ™ jako Adobe Reader, posiada faÅ‚szywy certyfikat.
- **Rejestr:** wpisy wskazujÄ…ce na ukrywanie sesji uÅ¼ytkownika.
- **Analiza sieciowa:** Å‚Ä…czy siÄ™ z serwerami Microsoftu (pozorne zachowanie), prÃ³buje pobraÄ‡ pliki z podejrzanych serwerÃ³w.
- **Dynamiczna analiza:** prÃ³buje zebraÄ‡ informacje o systemie, zainstalowaÄ‡ dodatkowy malware.

---

## ğŸš€ Instrukcja przeprowadzenia analizy

1. **PrzeprowadÅº analizÄ™ statycznÄ…:**
   - UÅ¼yj PEiD, PEStudio, Detect It Easy, IDA Pro.
   - Zweryfikuj wyniki na VirusTotal.

2. **PrzeprowadÅº analizÄ™ dynamicznÄ…:**
   - Skonfiguruj sandbox (Hybrid Analysis) lub lokalne Å›rodowisko (RegShot, Procmon, Process Explorer).
   - Uruchom prÃ³bkÄ™ i obserwuj zmiany.

3. **PrzeprowadÅº analizÄ™ sieciowÄ…:**
   - UÅ¼yj FakeNet-NG i Wireshark do przechwytywania ruchu.

4. **Dokumentuj wszystkie kroki:**
   - Zapisuj screeny, wyniki analiz, Å›cieÅ¼ki rejestru, aktywnoÅ›ci sieciowe.

---

## ğŸ“Š Kluczowe wnioski

- Malware stosuje wielowarstwowÄ… obfuskacjÄ™ (VMProtect, niestandardowe nagÅ‚Ã³wki).
- Zachowanie dynamiczne prÃ³bek jest trudne do przeanalizowania bez peÅ‚nego speÅ‚nienia warunkÃ³w Å›rodowiskowych (np. dostÄ™p do sieci, odpowiedni OS).
- CzÄ™Å›Ä‡ prÃ³bek podszywa siÄ™ pod legalne oprogramowanie (Adobe Reader) w celu unikania detekcji.
- Istotne sÄ… narzÄ™dzia sieciowe do wykrywania prÃ³b komunikacji z serwerami C&C.

---

## ğŸ‘¨â€ğŸ’» Autorzy

- **Mieszko Makowski**
- **Mateusz Jackiewicz**
- **Wiktor Deka**

Projekt na potrzeby kursu **Analiza Malware**, AGH, 2024.

