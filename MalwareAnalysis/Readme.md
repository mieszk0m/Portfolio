# 🦠 Malware Analysis – Analiza złośliwego oprogramowania

Kompleksowa analiza dwóch próbek złośliwego oprogramowania: cheat do gry **Dark and Darker** (ProAim D&D.exe) oraz klasycznego **Trojan-a**. Projekt obejmuje zarówno **statyczną**, **dynamiczną**, jak i **sieciową analizę malware** z wykorzystaniem zaawansowanych narzędzi oraz sandboxingu. Powstał w ramach kursu **Inżynieria Wsteczna i Analiza Malware** na AGH.

---

## 📂 Struktura projektu

```
Malware_Analysis/
├── Malware_Analysis_Report.pdf  # Pełny raport z analizy próbek
├── Malwere_Tools.pdf            # Użyte i opisane narzędzia wykorzystywane w analizie malware
├── samples/                     # Wykorzystane próbki malware (UWAGA jest to oprogramoanie NIEBEZPIECZNE)
└── README.md                    # Opis projektu i instrukcja analizy
```

---

## 🛠️ Wykorzystane narzędzia

### 🔍 Analiza statyczna:
- **PEiD** – wykrywanie packerów i kryptorów.
- **PE-bear** – przegląd struktury PE.
- **PEStudio** – analiza importów, wskaźników kompromitacji.
- **Detect It Easy (DIE)** – identyfikacja kryptorów i packerów.
- **IDA Pro** – deasemblacja i inżynieria wsteczna.
- **VirusTotal** – analiza reputacji próbek w wielu silnikach antywirusowych.

### 🌀 Analiza dynamiczna:
- **RegShot** – monitoring zmian rejestru Windows.
- **Process Monitor (Procmon)** – monitorowanie systemu plików, procesów i rejestru.
- **Process Explorer** – zaawansowany menedżer procesów.
- **x64_dbg** – debugger do analizy kodu.
- **VMPDump** – dekryptowanie VMProtect.
- **Hybrid-Analysis.com** – sandbox do dynamicznej analizy zachowania próbek.

### 🌐 Analiza sieciowa:
- **FakeNet-NG** – symulacja środowiska sieciowego i przechwytywanie ruchu.
- **Wireshark** – analiza pakietów sieciowych.

---

## 🔬 Zakres analizy

### Próbka 1: **ProAim D&D.exe (cheat do gry Dark and Darker)**
- **Obfuskacja:** wykorzystuje VMProtect, silna wielowarstwowa obfuskacja.
- **Rejestr:** tworzy wpisy w harmonogramie zadań, modyfikuje BAM, próbuje utrzymać aktywność w tle.
- **Analiza dynamiczna:** uruchamia puste okno cmd, wyłącza się, modyfikuje rejestr.
- **Sandbox:** podejrzane zachowanie (VMProtect, potencjalny trojan).

### Próbka 2: **Trojan (Adobe Reader WOW Helper)**
- **Podszywanie się:** maskuje się jako Adobe Reader, posiada fałszywy certyfikat.
- **Rejestr:** wpisy wskazujące na ukrywanie sesji użytkownika.
- **Analiza sieciowa:** łączy się z serwerami Microsoftu (pozorne zachowanie), próbuje pobrać pliki z podejrzanych serwerów.
- **Dynamiczna analiza:** próbuje zebrać informacje o systemie, zainstalować dodatkowy malware.

---

## 🚀 Instrukcja przeprowadzenia analizy

1. **Przeprowadź analizę statyczną:**
   - Użyj PEiD, PEStudio, Detect It Easy, IDA Pro.
   - Zweryfikuj wyniki na VirusTotal.

2. **Przeprowadź analizę dynamiczną:**
   - Skonfiguruj sandbox (Hybrid Analysis) lub lokalne środowisko (RegShot, Procmon, Process Explorer).
   - Uruchom próbkę i obserwuj zmiany.

3. **Przeprowadź analizę sieciową:**
   - Użyj FakeNet-NG i Wireshark do przechwytywania ruchu.

4. **Dokumentuj wszystkie kroki:**
   - Zapisuj screeny, wyniki analiz, ścieżki rejestru, aktywności sieciowe.

---

## 📊 Kluczowe wnioski

- Malware stosuje wielowarstwową obfuskację (VMProtect, niestandardowe nagłówki).
- Zachowanie dynamiczne próbek jest trudne do przeanalizowania bez pełnego spełnienia warunków środowiskowych (np. dostęp do sieci, odpowiedni OS).
- Część próbek podszywa się pod legalne oprogramowanie (Adobe Reader) w celu unikania detekcji.
- Istotne są narzędzia sieciowe do wykrywania prób komunikacji z serwerami C&C.

---

## 👨‍💻 Autorzy

- **Mieszko Makowski**
- **Mateusz Jackiewicz**
- **Wiktor Deka**

Projekt na potrzeby kursu **Analiza Malware**, AGH, 2024.

